The parser allows empty file and the resulting output is empty.

## BEGIN
-- main.hop --
-- out --
## END

When a tag is not properly closed the parser outputs an error.

## BEGIN
-- main.hop --
<main-comp>
	<div>
</main-comp>
-- out --
Unclosed <div>
## END

When a void tag is closed with an end tag the parser outputs an error.

## BEGIN
-- main.hop --
<main-comp>
	<hr></hr>
</main-comp>
-- out --
<hr> should not be closed using a closing tag
## END

When a closing tag does not have a matching opening tag, the parser outputs an
error.

## BEGIN
-- main.hop --
<main-comp>
	</div>
</main-comp>
-- out --
Unmatched </div>
## END

## BEGIN
-- main.hop --
<div>
</div>
-- out --
Invalid component name 'div'. Component names must contain a dash and not start or end with one
## END

## BEGIN
-- main.hop --
<main-comp params-as="Data123">
	<div></div>
</main-comp>
-- out --
Invalid variable name 'Data123'. Variable names must match [a-z][a-z0-9]*
## END

## BEGIN
-- main.hop --
<main-comp params-as="data">
	<foreach {item_name in data}>
		<div></div>
	</foreach>
</main-comp>
-- out --
Invalid variable name 'item_name'. Variable names must match [a-z][a-z0-9]*
## END

## BEGIN
-- main.hop --
<main-comp params-as="sections">
	<div>
		<foreach {section in sections}>
			<div>
				<h2 set-inner-text="section.title"></h2>
				<foreach {item in section.items}>
					<p set-inner-text="item"></p>
				</foreach>
			</div>
		</foreach>
	</div>
</main-comp>
-- out --
div
	foreach
		div
			h2
			foreach
				p
## END

## BEGIN
-- main.hop --
<main-comp params-as="foo">
	<!DOCTYPE html>
	<html>
	<body>
	<div>hello world</div>
	</body>
	</html>
</main-comp>
-- out --
doctype
html
	body
		div
## END

## BEGIN
-- main.hop --
<main-comp entrypoint>
    <script>
        console.log("test");
    </script>
    <style>
        body { color: red; }
    </style>
</main-comp>
-- out --
script
style
## END

## BEGIN
-- main.hop --
<main-comp params-as="data" entrypoint>
    <h1>Hello World</h1>
    <p set-inner-text="data.message"></p>
</main-comp>
-- out --
h1
p
## END

## BEGIN
-- main.hop --
<main-comp>
  <if {user.name == other_user.name}>
    <div>Same name</div>
  </if>
  <if {(data.x == data.y)}>
    <div>Parentheses work</div>
  </if>
  <if {a == b == c}>
    <div>Chained equality</div>
  </if>
</main-comp>
-- out --
if
	div
if
	div
if
	div
## END

## BEGIN
-- main.hop --
<main-comp>
  <if {x == y}>
    <div>Equal</div>
  </if>
</main-comp>
-- out --
if
	div
## END

## BEGIN
-- main.hop --
<main-comp params-as="i">
	<foreach {j in i}>
		<foreach {k in j.s.t}>
			<if {k}>
			</if>
		</foreach>
	</foreach>
	<foreach {p in i}>
		<foreach {k in p.s.t}>
			<foreach {item in k}>
			</foreach>
		</foreach>
	</foreach>
</main-comp>
-- out --
foreach
	foreach
		if
foreach
	foreach
		foreach
## END

## BEGIN
-- main.hop --
<main-comp params-as="data">
	<if {data}>
		<foreach {d in data}>
		</foreach>
	</if>
</main-comp>
-- out --
if
	foreach
## END

## BEGIN
-- main.hop --
<main-comp params-as="foo">
	<foreach {bar in foo}>
	  <div></div>
	</foreach>
</main-comp>
-- out --
foreach
	div
## END

## BEGIN
-- main.hop --
<main-comp params-as="p">
	<foo-comp></foo-comp>
	<foo-comp></foo-comp>
</main-comp>
-- out --
render
render
## END

## BEGIN
-- main.hop --
<main-comp params-as="foo">
	<foreach {v in foo}>
		<div set-inner-text="v"></div>
	</foreach>
</main-comp>
-- out --
foreach
	div
## END

## BEGIN
-- main.hop --
<main-comp params-as="foo">
	<script>
		const x = "<div></div>";
	</script>
</main-comp>
-- out --
script
## END

## BEGIN
-- main.hop --
<main-comp params-as="user">
  <a set-href="user.url" set-class="user.theme">Link</a>
</main-comp>
-- out --
a
## END

## BEGIN
-- main.hop --
<main-comp>
    <slot-content>
        Default content
    </slot-content>
    <other-comp>
        <with-data>
            Custom content
        </with-data>
    </other-comp>
</main-comp>

<other-comp>
    <slot-data>
        Other content
    </slot-data>
</other-comp>
-- out --
slot-content
render
	with-data
## END

## BEGIN
-- main.hop --
<main-comp>
    <slot-default>
        Default content
    </slot-default>
    <button-comp>
        <with-default>Custom Button</with-default>
    </button-comp>
</main-comp>
-- out --
slot-default
render
	with-default
## END

## BEGIN
-- main.hop --
<main-comp>
	<div class="navbar">
		<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" version="1.1" viewBox="0 0 128 128" class="size-12">
			<g style="fill: none; stroke: currentcolor; stroke-width: 5px; stroke-linecap: round; stroke-linejoin: round;">
				<path d="M20.04 38 64 22l43.96 16L64 54Z"></path>
				<path d="M17.54 47.09v48l35.099 12.775"></path>
				<path d="M64 112V64l46.46-16.91v48L77.988 106.91"></path>
			</g>
		</svg>
		<ul>
			<li><a href="/">Home</a></li>
		</ul>
	</div>
</main-comp>
-- out --
div
	svg
		g
			path
			path
			path
	ul
		li
			a
## END

## BEGIN
-- main.hop --
<main-comp>
	<form id="form">
		<input type="text" required>
		<button type="submit">Send</button>
	</form>
</main-comp>
-- out --
form
	input
	button
## END

Test basic <if> tag with simple variable expression.

## BEGIN
-- main.hop --
<main-comp>
	<if {isVisible}>
		<div>This is visible</div>
	</if>
</main-comp>
-- out --
if
	div
## END

Test <if> tag with complex expression.

## BEGIN
-- main.hop --
<main-comp>
	<if {user.name == 'admin'}>
		<div>Admin panel</div>
		<button>Settings</button>
	</if>
</main-comp>
-- out --
if
	div
	button
## END

Test <if> tag without expression should produce error.

## BEGIN
-- main.hop --
<main-comp>
	<if>
		<div>Content</div>
	</if>
</main-comp>
-- out --
Missing expression in <if> tag
## END

Test basic <foreach> tag with simple loop generator expression.

## BEGIN
-- main.hop --
<main-comp>
	<foreach {item in items}>
		<div>Item content</div>
	</foreach>
</main-comp>
-- out --
foreach
	div
## END

Test <foreach> tag with complex array expression.

## BEGIN
-- main.hop --
<main-comp>
	<foreach {user in users.active}>
		<div>User: {user.name}</div>
		<p>Role: {user.role}</p>
	</foreach>
</main-comp>
-- out --
foreach
	div
	p
## END

Test <foreach> tag without expression should produce error.

## BEGIN
-- main.hop --
<main-comp>
	<foreach>
		<div>Content</div>
	</foreach>
</main-comp>
-- out --
Missing loop generator expression in <foreach> tag
## END

Test <foreach> tag with non-loop-generator expression should produce error.

## BEGIN
-- main.hop --
<main-comp>
	<foreach {someVariable}>
		<div>Content</div>
	</foreach>
</main-comp>
-- out --
Expected loop generator expression (var in array) in <foreach> tag
## END
