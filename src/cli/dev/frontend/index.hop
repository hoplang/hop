import lucide::ArrowRight
import lucide::ArrowUpRight
import lucide::Search
import lucide::Maximize
import lucide::Maximize2

record EntrypointData {
  name: String,
  module: String,
}

<Entrypoint {name: String, module: String}>
  <a
    href={"/view/" + name}
    class="group flex flex-col gap-4 outline-none"
  >
    <div class={
      classes!(
        "w-full",
        "h-40",
        "border",
        "border-neutral-300",
        "rounded",
        "relative",
        "overflow-hidden",
        "group-focus:ring-3",
        "ring-neutral-200",
      )
    }>
      <iframe
        class={
          classes!(
            "w-[400%]",
            "h-[400%]",
            "scale-[0.25]",
            "origin-top-left",
            "pointer-events-none",
            "grayscale",
            "group-hover:grayscale-0",
            "group-focus:grayscale-0",
            "transition-[filter]",
          )
        }
        scrolling="no"
        tabindex="-1"
        sandbox=""
        src={"/api/render/" + name}
      >
      </iframe>
      <div class={
        classes!(
          "absolute",
          "right-0",
          "bottom-0",
          "z-index-1000",
          "opacity-0",
          "p-2",
          "bg-white",
          "rounded-tl",
          "group-hover:opacity-100",
          "transition-opacity",
        )
      }>
        <Maximize/>
      </div>
    </div>
    <div class="flex flex-col gap-0.5">
      <h2 class="text-lg text-[#111]">
        {name}
      </h2>
      <p class="text-sm text-[#666666]">
        in {module}
      </p>
    </div>
  </a>
</Entrypoint>

<Logo {class: String = ""}>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class={
      classes!(
        "lucide",
        "lucide-circle-icon",
        "lucide-circle",
        class,
      )
    }
  >
    <circle cx="12" cy="12" r="10">
    </circle>
  </svg>
</Logo>

entrypoint Index(entrypoints: Array[EntrypointData] = [
  EntrypointData(module: "index.hop", name: "Index"),
  EntrypointData(module: "program.hop", name: "Program"),
]) {
  <head>
    <link
      rel="stylesheet"
      href="https://rsms.me/inter/inter.css"
    >
  </head>
  <body
    class="bg-[#f3f3f3]"
    style="font-family: Inter, sans-serif;"
  >
    <div class="max-w-6xl px-6 mx-auto my-8 flex flex-col">
      <a
        href="/"
        class="mt-1 lg:mt-2 mb-16 xl:mb-32"
        tabindex="-1"
      >
        <Logo/>
      </a>
      <div class="flex flex-col gap-6 xl:gap-8">
        <h1 class="text-3xl md:text-4xl font-light">
          Entrypoints
        </h1>
        <div class={
          classes!(
            "grid",
            "sm:grid-cols-2",
            "md:grid-cols-3",
            "lg:grid-cols-4",
            "gap-12",
            "sm:gap-8",
            "lg:gap-14",
          )
        }>
          <for {ep in entrypoints}>
            <Entrypoint name={ep.name} module={ep.module}/>
          </for>
        </div>
      </div>
    </div>
  </body>
}
