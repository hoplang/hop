import lucide::Maximize
import lucide::Monitor
import lucide::Smartphone
import components::logo::Logo

enum Device {
  Desktop,
  Mobile,
}

entrypoint Preview(
  name: String = "Index",
  iframe_src: String = "",
  device: Device = Device::Desktop,
) {
  <head>
    <link
      rel="stylesheet"
      href="https://rsms.me/inter/inter.css"
    >
  </head>
  <body
    style="font-family: Inter, sans-serif;"
    class={
      join!(
        "bg-[#f3f3f3]/90",
        "p-4",
        "flex",
        "flex-col",
        "items-center",
        "gap-6",
        "h-dvh",
      )
    }
  >
    <div class={
      join!(
        "w-full",
        "flex",
        "justify-between",
        "items-end",
      )
    }>
      <div class="flex items-center gap-3">
        <a href="/" tabindex="-1">
          <Logo/>
        </a>
        <div>
          <h1 class="text-xl text-[#111]">
            {name}
          </h1>
          <p class="text-sm text-[#666]">
            in index.hop
          </p>
        </div>
      </div>
      <div class="flex gap-2">
        <a href="?device=mobile">
          <Smartphone class={
            match device {
              Device::Mobile => "",
              _ => "text-neutral-400",
            }
          }/>
        </a>
        <a href="?device=desktop">
          <Monitor class={
            match device {
              Device::Desktop => "",
              _ => "text-neutral-400",
            }
          }/>
        </a>
        <a href={iframe_src}>
          <Maximize class="text-neutral-400"/>
        </a>
      </div>
      <div>
      </div>
    </div>
    <div class={
      join!(
        "bg-white",
        "h-full",
        "border",
        "border-neutral-300",
        "rounded",
        "overflow-hidden",
        match device {
          Device::Mobile => "w-md",
          _ => "w-full",
        },
      )
    }>
      <iframe src={iframe_src} class="w-full h-full">
      </iframe>
    </div>
  </body>
}
